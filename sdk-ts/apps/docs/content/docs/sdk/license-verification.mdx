---
title: License Verification
description: How Tuish verifies licenses offline and online
---

# License Verification

Tuish uses a hybrid verification approach: cryptographic offline verification first, with optional online validation.

## How It Works

1. **Offline Verification** - Licenses are cryptographically signed with Ed25519. The SDK verifies the signature locally without any network call.

2. **Machine Binding** - Licenses are bound to a machine fingerprint, preventing sharing across devices.

3. **Online Validation** (optional) - For additional security, you can validate licenses against the server to check for revocation.

## Basic Usage

```typescript
const result = await tuish.checkLicense();

if (result.valid) {
  console.log('License is valid');
  console.log('Verified offline:', result.offlineVerified);
  console.log('License details:', result.license);
} else {
  console.log('License invalid:', result.reason);
}
```

## License Check Result

```typescript
interface LicenseCheckResult {
  /** Whether the license is valid */
  valid: boolean;

  /** License payload if valid */
  license?: LicenseDetails;

  /** Reason for invalid license */
  reason?: LicenseInvalidReason;

  /** Whether the license was verified offline */
  offlineVerified: boolean;
}

interface LicenseDetails {
  id: string;
  productId: string;
  productName?: string;
  features: string[];
  status: 'active' | 'expired' | 'revoked';
  issuedAt: number;
  expiresAt: number | null;  // null for perpetual licenses
}

type LicenseInvalidReason =
  | 'not_found'
  | 'expired'
  | 'revoked'
  | 'invalid_format'
  | 'invalid_signature'
  | 'machine_mismatch'
  | 'network_error';
```

## Manual License Management

```typescript
// Store a license key manually
tuish.storeLicense('eyJhbGciOiJFZER...');

// Get cached license key
const key = tuish.getCachedLicenseKey();

// Clear cached license
tuish.clearLicense();

// Extract license info without verification (display only)
const info = tuish.extractLicenseInfo(licenseKey);
```

## Machine Fingerprint

Get the current machine's fingerprint:

```typescript
const fingerprint = tuish.getMachineFingerprint();
console.log('Machine ID:', fingerprint);
```

The fingerprint is derived from hardware identifiers and is stable across reboots.
